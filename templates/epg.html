{% extends "base.html" %}

{% block title %}EPG Viewer - MacReplay{% endblock %}


{% block content %}
<div id="page-meta" data-page="epg"></div>
<script id="page-data" type="application/json">
{{ {} | tojson }}
</script>
<div class="row">
    <div class="col-12">
        <h2><i class="fas fa-calendar-alt"></i> EPG Viewer</h2>
        <p class="text-muted">Electronic Program Guide - View current and upcoming programs</p>
    </div>
</div>

<div class="row mt-3">
    <div class="col-md-4">
        <div class="epg-container channels-box">
            <div class="epg-header d-flex justify-content-between align-items-center">
                <input type="text" class="form-control search-box me-2" id="channelSearch" placeholder="Search channels..." style="max-width: 200px;">
                <button class="btn btn-outline-primary btn-refresh" id="refreshEpgBtn" onclick="refreshEPG()" title="Refresh EPG data">
                    <i class="fas fa-sync-alt"></i>
                </button>
            </div>
            <div class="channel-list" id="channelList">
                <div class="text-center py-5 text-muted">
                    <i class="fas fa-spinner fa-spin fa-2x"></i>
                    <p class="mt-2">Loading channels...</p>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-8">
        <div class="epg-container programmes-box">
            <div class="epg-header d-flex justify-content-between align-items-center">
                <h5 class="mb-0" id="selectedChannelName">Select a channel</h5>
                <small class="text-muted" id="lastUpdated"></small>
            </div>
            <div class="programme-list" id="programmeList">
                <div class="no-programmes">
                    <i class="fas fa-tv fa-3x mb-3"></i>
                    <p>Select a channel to view its program guide</p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mt-3">
    <div class="col-12">
        <small class="text-muted">
            <i class="fas fa-info-circle"></i>
            Channels: <span id="channelCount">0</span> |
            Programs: <span id="programmeCount">0</span> |
            Current: <span id="currentCount">0</span> |
            Last EPG update: <span id="epgLastUpdate">-</span> |
            Server TZ: <span id="serverTz">-</span> |
            EPG Range: <span id="epgRange">-</span>
        </small>
    </div>
</div>
{% endblock %}

{% block scripts %}{% endblock %}
